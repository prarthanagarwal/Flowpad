<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data:; connect-src 'self';">
    <title>Flowpad</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/phosphor-icons.css">
</head>
<body>
    <div class="app-container">
        <!-- Title Bar Replacement -->
        <div class="title-bar">
            <div class="title-bar-content">
                <div class="app-title">
                    <img src="assets/icon.ico" alt="Flowpad" class="app-icon">
                    <span>Flowpad</span>
                </div>
                <div class="middle-dot">Â·</div>
                <div class="current-note-title" id="currentNoteTitle">New Note</div>
                
                <!-- Custom Window Controls -->
                <div class="window-controls">
                    <button class="window-control-btn minimize-btn" id="minimizeBtn" title="Minimize">
                        <i class="ph ph-minus" style="font-size: 14px;"></i>
                    </button>
                    <button class="window-control-btn fullscreen-btn" id="fullscreenBtn" title="Toggle Fullscreen">
                        <i class="ph ph-arrows-out-simple" style="font-size: 14px;"></i>
                    </button>
                    <button class="window-control-btn close-btn" id="closeBtn" title="Close">
                        <i class="ph ph-x" style="font-size: 14px;"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Sidebar Overlay -->
            <div class="sidebar-overlay" id="sidebarOverlay"></div>
            
            <!-- Sidebar for History -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h3>Notes History</h3>
                    <button class="close-sidebar" id="closeSidebar">
                        <i class="ph ph-x" style="font-size: 18px;"></i>
                    </button>
                </div>
                <div class="search-container">
                    <input type="text" id="searchNotes" placeholder="Search notes..." class="search-input" spellcheck="false">
                </div>
                <div class="folder-navigation" id="folderNavigation">
                    <div class="folder-tabs" id="folderTabs">
                        <button class="folder-tab active" data-folder="all">All</button>
                    </div>
                    <button class="new-folder-btn" id="newFolderBtn" title="Create New Folder">
                        <i class="ph ph-plus" style="font-size: 12px;"></i>
                    </button>
                </div>
                <div class="notes-list" id="notesList">
                    <!-- Notes will be dynamically populated here -->
                </div>
            </div>

            <!-- Editor Area -->
            <div class="editor-container">
                <!-- Main Editor -->
                <div class="editor-wrapper">
                    <div id="editor" class="editor" contenteditable="true" spellcheck="false"></div>
                    <div class="editor-placeholder" id="editorPlaceholder">Start writing your note...</div>
                </div>
            </div>
        </div>

        <!-- Bottom Toolbar -->
        <div class="bottom-toolbar">
            <div class="toolbar-left">
                <button id="surpriseBtn" class="toolbar-btn" title="Surprise">
                    <i class="ph ph-sparkle" style="font-size: 16px;"></i>
                    <span>Surprise</span>
                </button>
                <div class="font-family-dropdown" id="fontDropdown">
                    <button id="fontBtn" class="toolbar-btn" title="Font Family">
                        <i class="ph ph-textbox" style="font-size: 16px;"></i>
                        <span>Font</span>
                    </button>
                    <div class="font-family-dropdown-content" id="fontDropdownContent">
                        <div class="font-options">
                            <button class="font-option active" data-font="Aeonik">Aeonik</button>
                            <button class="font-option" data-font="Baskervville">Baskervville</button>
                            <button class="font-option" data-font="Instrument Serif">Instrument Serif</button>
                            <button class="font-option" data-font="Neue Regrade">Neue Regrade</button>
                            <button class="font-option" data-font="Patrick Hand">Patrick Hand</button>
                            <button class="font-option" data-font="Courier New">Courier New</button>
                        </div>
                    </div>
                </div>
                <div class="font-size-dropdown" id="fontsizeDropdown">
                    <button id="fontsizeBtn" class="toolbar-btn" title="Font Size">
                        <i class="ph ph-at" style="font-size: 16px;"></i>
                        <span id="fontsizeDisplay">18px</span>
                    </button>
                    <div class="font-size-dropdown-content" id="fontsizeDropdownContent">
                        <div class="size-options">
                            <button class="size-option" data-size="16">16px</button>
                            <button class="size-option" data-size="18" class="active">18px</button>
                            <button class="size-option" data-size="20">20px</button>
                            <button class="size-option" data-size="22">22px</button>
                            <button class="size-option" data-size="24">24px</button>
                            <button class="size-option" data-size="26">26px</button>
                            <button class="size-option" data-size="28">28px</button>
                        </div>
                    </div>
                </div>
                <div class="formatting-dropdown" id="formattingDropdown">
                    <button id="formatBtn" class="toolbar-btn" title="Text Formatting">
                        <i class="ph ph-text-aa" style="font-size: 16px;"></i>
                    </button>
                    <div class="formatting-dropdown-content" id="formattingDropdownContent">
                        <div class="format-buttons">
                            <button class="format-btn" data-command="bold" title="Bold" id="boldBtn">
                                <i class="ph ph-text-b" style="font-size: 14px;"></i>
                            </button>
                            <button class="format-btn" data-command="italic" title="Italic" id="italicBtn">
                                <i class="ph ph-text-italic" style="font-size: 14px;"></i>
                            </button>
                            <button class="format-btn" data-command="underline" title="Underline" id="underlineBtn">
                                <i class="ph ph-text-underline" style="font-size: 14px;"></i>
                            </button>
                            <button class="format-btn" data-command="strikethrough" title="Strikethrough">
                                <i class="ph ph-text-strikethrough" style="font-size: 14px;"></i>
                            </button>
                            <button class="format-btn" data-command="highlight" title="Highlight Text" id="highlightBtn">
                                <i class="ph ph-highlighter" style="font-size: 14px;"></i>
                            </button>
                        </div>
                        <div class="highlight-color-picker" id="highlightColorPicker">
                            <div class="color-presets">
                                <div class="color-preset no-color" data-color="none" title="Remove highlight">
                                    <i class="ph ph-x" style="font-size: 10px; color: #888;"></i>
                                </div>
                                <div class="color-preset" data-color="#ffff00" style="background-color: #ffff00;"></div>
                                <div class="color-preset" data-color="#90ee90" style="background-color: #90ee90;"></div>
                                <div class="color-preset" data-color="#87ceeb" style="background-color: #87ceeb;"></div>
                                <div class="color-preset" data-color="#ffb6c1" style="background-color: #ffb6c1;"></div>
                                <div class="color-preset" data-color="#ffa500" style="background-color: #ffa500;"></div>
                                <div class="color-preset" data-color="#ff6b6b" style="background-color: #ff6b6b;"></div>
                                <div class="color-preset" data-color="#4ecdc4" style="background-color: #4ecdc4;"></div>
                                <div class="color-preset" data-color="#45b7d1" style="background-color: #45b7d1;"></div>
                                <div class="color-preset" data-color="#96ceb4" style="background-color: #96ceb4;"></div>
                                <div class="color-preset" data-color="#feca57" style="background-color: #feca57;"></div>
                                <div class="color-preset" data-color="#ff9ff3" style="background-color: #ff9ff3;"></div>
                                <div class="color-preset" data-color="#54a0ff" style="background-color: #54a0ff;"></div>
                                <div class="color-preset" data-color="#5f27cd" style="background-color: #5f27cd;"></div>
                                <div class="color-preset" data-color="#00d2d3" style="background-color: #00d2d3;"></div>
                                <div class="color-preset" data-color="#ff9f43" style="background-color: #ff9f43;"></div>
                                <div class="color-preset" data-color="#ee5a24" style="background-color: #ee5a24;"></div>
                                <div class="color-preset" data-color="#0984e3" style="background-color: #0984e3;"></div>
                                <div class="color-preset" data-color="#6c5ce7" style="background-color: #6c5ce7;"></div>
                                <div class="color-preset" data-color="#a29bfe" style="background-color: #a29bfe;"></div>
                                <div class="color-preset" data-color="#fd79a8" style="background-color: #fd79a8;"></div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
            <div class="toolbar-center">
                <div class="current-time" id="currentTime"></div>
                <div class="word-count" id="wordCount">0 words</div>
                

            </div>
            
            <div class="toolbar-right">
                <button id="newNoteBtn" class="toolbar-btn" title="New Note">
                    <i class="ph ph-note-blank" style="font-size: 16px;"></i>
                    <span>New</span>
                </button>
                <button id="historyBtn" class="toolbar-btn" title="Toggle History">
                    <i class="ph ph-clock-clockwise" style="font-size: 16px;"></i>
                    <span>History</span>
                </button>
                <div class="toolbar-separator">â¢</div>
                <button id="themeBtn" class="toolbar-btn" title="Toggle Theme">
                    <i class="ph ph-sun"></i>
                    <span>Light Mode</span>
                </button>
                <button id="settingsBtn" class="toolbar-btn" title="Settings">
                    <i class="ph ph-gear" style="font-size: 16px;"></i>
                    <span>Settings</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Context Menu for Editor -->
    <div class="editor-context-menu" id="editorContextMenu">
        <div class="context-menu-item" data-action="edit-with-ai">
            <i class="ph ph-sparkle" style="font-size: 12px;"></i>
            Edit with AI
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="copy">
            <i class="ph ph-copy" style="font-size: 12px;"></i>
            Copy
        </div>
        <div class="context-menu-item" data-action="paste">
            <i class="ph ph-clipboard-text" style="font-size: 12px;"></i>
            Paste
        </div>
        <div class="context-menu-item" data-action="cut">
            <i class="ph ph-scissors" style="font-size: 12px;"></i>
            Cut
        </div>
        <div class="context-menu-item" data-action="select-all">
            <i class="ph ph-selection-all" style="font-size: 12px;"></i>
            Select All
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-modal" id="settingsModal">
        <div class="settings-modal-overlay"></div>
        <div class="settings-modal-content">
            <div class="settings-modal-header">
                <h3>Settings</h3>
                <button class="settings-modal-close" id="settingsModalClose">
                    <i class="ph ph-x" style="font-size: 18px;"></i>
                </button>
            </div>
            <div class="settings-modal-body">
                <!-- Settings content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Inline AI Prompt -->
    <div class="inline-prompt" id="inlinePrompt">
        <div class="inline-prompt-history" id="promptHistory"></div>
        <div class="inline-prompt-input-container">
            <input type="text" id="promptInput" class="inline-prompt-input" placeholder="Ask AI to edit this text..." spellcheck="false">
            <button class="inline-prompt-submit" id="promptSubmit">
                <i class="ph ph-paper-plane-tilt"></i>
            </button>
            <button class="inline-prompt-close" id="promptClose">
                <i class="ph ph-x"></i>
            </button>
            <!-- Inline action buttons that appear after prompt submission -->
            <div class="inline-prompt-actions" id="promptActions" style="display: none;">
                <button class="inline-prompt-reject" id="promptReject" title="Reject (â§ââ©)">
                    <span>Reject</span>
                    <span class="shortcut">â§ââ©</span>
                </button>
                <button class="inline-prompt-accept" id="promptAccept" title="Accept (ââ©)">
                    <span>Accept</span>
                    <span class="shortcut">ââ©</span>
                </button>
            </div>
        </div>
    </div>

    <!-- AI Response Preview -->
    <div class="ai-preview-container">
        <div class="ai-preview" id="aiPreview">
            <div class="ai-preview-content" id="aiPreviewContent"></div>
        </div>
        <div class="ai-preview-actions" id="aiPreviewActions" style="display: none;">
            <button class="ai-preview-undo" id="previewUndo">
                <span>Undo</span>
                <span class="shortcut">âN</span>
            </button>
            <button class="ai-preview-keep" id="previewKeep">
                <span>Keep</span>
                <span class="shortcut">âY</span>
            </button>
        </div>
    </div>

    <script src="src/shared/utils.js"></script>
    <script src="app.js"></script>
</body>
</html> 